<template>
    <div>
        <h3>Board Detail</h3>

        <div class="detailContainer">
            <div class="detailBox" v-if="boardLoaded">
                <div class="timetable">
                    <!-- <div class="thead">
                        <div class="day">
                            <div class="empty"></div>
                            <span>Ïõî</span>
                            <span>Ìôî</span>
                            <span>Ïàò</span>
                            <span>Î™©</span>
                            <span>Í∏à</span>
                            <span>ÌÜ†</span>
                            <span>Ïùº</span>
                        </div>
                    </div> -->
                    <!-- <div class="timeBox">
                        <div class="time">
                            <span>Ïò§Ï†Ñ</span>
                            <span>Ïò§ÌõÑ</span>
                            <span>Ï†ÄÎÖÅ</span>
                        </div>
                        <div class="timeInfo">
                            <div class="thead">
                                <div class="day">
                                    <span>Ïõî</span>
                                    <span>Ìôî</span>
                                    <span>Ïàò</span>
                                    <span>Î™©</span>
                                    <span>Í∏à</span>
                                    <span>ÌÜ†</span>
                                    <span>Ïùº</span>
                                </div>
                            </div>
                            <div class="tbody">
                                <div class="one">f</div>
                            </div>
                        </div>
                    </div> -->
                    <table class="table table-bordered">
                        <tr>
                            <th></th>
                            <th>Ïõî</th>
                            <th>Ìôî</th>
                            <th>Ïàò</th>
                            <th>Î™©</th>
                            <th>Í∏à</th>
                            <th>ÌÜ†</th>
                            <th>Ïùº</th>
                        </tr>
                        <tbody v-for="ex in store.board.exList" :key="ex.routineId">
                            <tr>
                                <td>Ïò§Ï†Ñ</td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ïõî', 'Ïò§Ï†Ñ')}"
                                    :style="{ backgroundColor: isExist(ex.dayOfTheWeek, ex.time, 'Ïõî', 'Ïò§Ï†Ñ') ? randomBrightColor() : '' }"
                                >
                                </td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ìôî', 'Ïò§Ï†Ñ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ïàò', 'Ïò§Ï†Ñ')}"
                                    :style="{ backgroundColor: isExist(ex.dayOfTheWeek, ex.time, 'Ïàò', 'Ïò§Ï†Ñ') ? randomBrightColor() : '' }"
                                >
                                </td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Î™©', 'Ïò§Ï†Ñ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Í∏à', 'Ïò§Ï†Ñ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'ÌÜ†', 'Ïò§Ï†Ñ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ïùº', 'Ïò§Ï†Ñ')}"></td>
                            </tr>
                            <tr>
                                <td>Ïò§ÌõÑ</td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ïõî', 'Ïò§ÌõÑ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ìôî', 'Ïò§ÌõÑ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ïàò', 'Ïò§ÌõÑ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Î™©', 'Ïò§ÌõÑ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Í∏à', 'Ïò§ÌõÑ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'ÌÜ†', 'Ïò§ÌõÑ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ïùº', 'Ïò§ÌõÑ')}"></td>
                            </tr>
                            <tr>
                                <td>Ï†ÄÎÖÅ</td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ïõî', 'Ï†ÄÎÖÅ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ìôî', 'Ï†ÄÎÖÅ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ïàò', 'Ï†ÄÎÖÅ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Î™©', 'Ï†ÄÎÖÅ')}"
                                    :style="{ backgroundColor: isExist(ex.dayOfTheWeek, ex.time, 'Î™©', 'Ï†ÄÎÖÅ') ? randomBrightColor() : '' }"
                                >
                                </td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Í∏à', 'Ï†ÄÎÖÅ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'ÌÜ†', 'Ï†ÄÎÖÅ')}"></td>
                                <td :class="{'isExist': isExist(ex.dayOfTheWeek, ex.time, 'Ïùº', 'Ï†ÄÎÖÅ')}"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="info">
                    <span class="rTitle">
                        {{ store.board.routine.routineTitle }}
                        <span class="heart">ü§ç</span>
                    </span>
                    <span class="rWriter">{{ store.board.routine.userId }}</span>
                    <span class="rDesc">{{ store.board.routine.description }}</span>
                    <button class="myAddBtn">ÎÇ¥ Î£®Ìã¥Ïóê Ï∂îÍ∞Ä</button>
                </div>
            </div>
        </div>

    </div>
</template>

<script setup>
    import { useBoardStore } from '@/stores/board'
    import { onMounted, ref, onBeforeMount } from 'vue'
    import { useRoute, useRouter } from 'vue-router'
    import axios from 'axios'

    const store = useBoardStore()
    const boardLoaded = ref(false)

    const route = useRoute()
    // const router = useRouter()

    const isExist = (day, time, targetDay, targetTime) => {
        return day.includes(targetDay) && time === targetTime;
    }

    let randomBrightColor = () => {
        let color_r = Math.floor(Math.random() * 127 + 128).toString(16);
        let color_g = Math.floor(Math.random() * 127 + 128).toString(16);
        let color_b = Math.floor(Math.random() * 127 + 128).toString(16);
        return `#${color_r+color_g+color_b}`;
    }

    // store.board.exList.forEach(ex => {
    //     // td ÏóòÎ¶¨Î®ºÌä∏Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§.
    //     const tdElement = document.createElement('td');
        
    //     // tdÏóê ÏöîÏÜåÎ•º Ï∂îÍ∞ÄÌï©ÎãàÎã§.
    //     tdElement.textContent = ex.someValue; // exÏùò Ïñ¥Îñ§ ÏÜçÏÑ±Ïù¥ÎÇò Í∞íÏóê Ï†ëÍ∑ºÌïòÏó¨ tdÏóê ÎÑ£ÏäµÎãàÎã§.

    //     // ÎßåÎì† td ÏóòÎ¶¨Î®ºÌä∏Î•º ÏõêÌïòÎäî Í≥≥Ïóê Ï∂îÍ∞ÄÌï©ÎãàÎã§.
    //     // ÏòàÎ•º Îì§Ïñ¥, ÌäπÏ†ï ÌÖåÏù¥Î∏îÏùò tbodyÏóê Ï∂îÍ∞ÄÌïòÎ†§Î©¥ Îã§ÏùåÍ≥º Í∞ôÏù¥ Ìï©ÎãàÎã§.
    //     document.querySelector('tbody').appendChild(tdElement);
    // });





    onMounted(async () => {
        await store.getBoard(route.params.routineId)
        boardLoaded.value = true
        // console.log(store.board.routine)
        // console.log(typeof store.board.routine)
        // console.log(typeof store.board.routine.routineTitle)
        // console.log(store.board.value.routine.routineTitle)
        // routineTitle.value = store.board.routine.routineTitle
        // console.log(store.board.exList[0].dayOfTheWeek)
    })

    

</script>

<style scoped>
    .detailBox {
        border: 1px solid lightgray;
        width: 80%;
        margin: 10px auto;
        display: flex;
        flex-direction: row;
        padding: 10px;
    }

    .detailBox .timetable {
        border: 1px solid skyblue;
        width: 50%;
    }

    .detailBox .info {
        border: 1px solid orange;
        display: flex;
        flex-direction: column;
        width: 50%;
        padding: 10px;
    }

    .info span {
        margin-bottom: 5px;
    }

    .info .rTitle {
        font-size: 1.5em;
        font-weight: bold;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
    }

    
    .info .rWriter {
        font-size: 0.9em;

    }
    
    .info .myAddBtn {
        width: 110px;
        background-color: #A9DDDE;
        border: 1px solid #A9DDDE;
        border-radius: 5px;
        font-size: 0.8em;
        font-weight: bold;
        color: white;
    }

    /* .isExist {
        height: 35px;
    } */
    .timetable .thead {
        width: 100%;
        display: flex;
        flex-direction: row;
        justify-content: space-around;
    }
    .thead .day {
        width: 100%;
        display: flex;
        flex-direction: row;
        justify-content: space-around;
        border: 1px solid gray;
        padding-left: 5px;
    }
    .time {
        display: flex;
        flex-direction: column;
        border: 1px solid gray;
        width: 15%;
        justify-content: space-around;
        text-align: center;
        padding-top: 10px;
    }
    .timetable .timeBox{
        display: flex;
        flex-direction: row;
        border: 1px solid gray;
        width: 100%;
        height: 200px;
    }
    .timeBox .timeInfo{
        width: 85%;
        border: 1px solid red;
        
    }
    .timeInfo table {
        width: 100%;
    }
    table td {
        height: 30px;
    }
    .tbody {
        border: 1px solid blue;
        padding-left: 5px;
    }
    .tbody .one {
        border: 1px solid green;
        width: 14%;
        
    }
    /* .empty {
        width: 10%;
    } */
</style>