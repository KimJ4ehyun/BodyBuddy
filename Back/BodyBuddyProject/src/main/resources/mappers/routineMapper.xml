<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bodybuddy.fit.model.dao.RoutineDao">
	
	<!-- 루틴 전체 목록 가져오기 -->
	<select id="selectAll" resultType="Routine">
		SELECT *
		FROM routines
	</select>
	
	<!-- 루틴 상세보기 -->
	<select id="selectOne" parameterType="int" resultType="Routine">
		SELECT *
		FROM routines
		WHERE routine_id = #{routineId}
	</select>
	
	<!-- 해당 루틴의 운동 정보 리스트 가져오기 -->
	<select id="selectAllExercise" parameterType="int" resultType="Exercise">
		SELECT *
		FROM exercises 
		WHERE routine_id = #{routineId}
	</select>
	
	<!-- 해당 루틴의 운동 상세정보 보기 (운동 한 개) -->
	<select id="selectExercise" parameterType="map" resultType="Exercise">
		SELECT *
		FROM exercises
		WHERE routine_id = #{routineId} AND exercise_id = #{exerciseId}
	</select>
	
	<!-- 루틴 등록 -->
	<insert id="insertRoutine" parameterType="Routine">
		INSERT INTO routines (user_id, routine_title, description)
		VALUES (#{userId}, #{routineTitle}, #{description})
	</insert>
	
	<!-- 루틴 등록 - 운동 등록 -->
	<insert id="insertExercise" parameterType="Exercise" >
		INSERT INTO exercises
			(routine_id, exercise_name, exercise_part, set_cnt, weight, repetitions, day_of_the_week, time)
		VALUES 
			(#{routineId}, #{exerciseName}, #{exercisePart}, #{setCnt}, #{weight}, #{repetitions}, #{dayOfTheWeek}, #{time})
	</insert>
	
</mapper>